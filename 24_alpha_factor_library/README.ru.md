# Приложение - Библиотека альфа-факторов

На протяжении всей книги мы подчёркивали, что грамотное проектирование признаков, включая соответствующую предобработку и очистку от шума, как правило, приводит к эффективной стратегии.
Это приложение обобщает некоторые уроки по инженерии признаков и предоставляет дополнительную информацию по этой важной теме.

В главе 4 факторы были классифицированы по лежащему в их основе риску, за который инвестор получает вознаграждение сверх рыночной доходности.
Эти категории включают: стоимость vs рост, качество и настроения рынка, а также волатильность, моментум и ликвидность.
На протяжении всей книги мы использовали многочисленные метрики для измерения этих факторов риска.
Данное приложение расширяет эти примеры и собирает популярные индикаторы, которые вы можете использовать как справочник или источник вдохновения для разработки собственных стратегий.
Также здесь показано, как их вычислять, и включены некоторые шаги для оценки этих индикаторов.

С этой целью мы фокусируемся на широком спектре индикаторов, реализованных в TA-Lib (см. [Главу 4](04_alpha_factor_research)) и статье WorldQuant [«101 Formulaic Alphas»](https://arxiv.org/pdf/1601.00991.pdf) (Kakushadze 2016), которая представляет реальные количественные торговые факторы, используемые в продакшене со средним периодом удержания от 0,6 до 6,4 дней.

Эта глава охватывает:
- Как вычислить несколько десятков технических индикаторов с помощью TA-Lib и NumPy/pandas,
- Создание формульных альфа-факторов, описанных в вышеуказанной статье, и
- Оценку предсказательного качества результатов с использованием различных метрик: от ранговой корреляции и взаимной информации до важности признаков, значений SHAP и Alphalens.

## Содержание

1. [Зоопарк индикаторов](#зоопарк-индикаторов)
2. [Пример кода: распространённые альфа-факторы в TA-Lib](#пример-кода-распространённые-альфа-факторы-в-ta-lib)
3. [Пример кода: поиск формульных альфа от WorldQuant](#пример-кода-поиск-формульных-альфа-от-worldquant)
4. [Пример кода: двумерная и многомерная оценка факторов](#пример-кода-двумерная-и-многомерная-оценка-факторов)

## Зоопарк индикаторов

Глава 4, [Финансовая инженерия признаков: как исследовать альфа-факторы](../04_alpha_factor_research), обобщает многолетние усилия учёных и практиков по выявлению информации или переменных, которые помогают надёжно предсказывать доходность активов.
Эти исследования привели от однофакторной модели оценки капитальных активов (CAPM) к «[зоопарку новых факторов](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.407.3913&rep=rep1&type=pdf)» (Cochrane 2011).

Этот зоопарк факторов содержит сотни характеристик компаний и метрик цен ценных бумаг, представленных как статистически значимые предикторы доходности акций в литературе об аномалиях с 1970 года (см. обзор в [Green, Hand, and Zhang](https://academic.oup.com/rfs/article-abstract/30/12/4389/3091648), 2017).
- Ноутбук [indicator_zoo](00_indicator_zoo.ipynb) содержит множество примеров.

## Пример кода: распространённые альфа-факторы в TA-Lib

Библиотека TA-Lib широко используется разработчиками торгового программного обеспечения для технического анализа данных финансовых рынков. Она включает более 150 популярных индикаторов из нескольких категорий — от исследований перекрытия (Overlap Studies), включая скользящие средние и полосы Боллинджера, до статистических функций, таких как линейная регрессия.

**Группа функций**|**Кол-во индикаторов**
:-----:|:-----:
Исследования перекрытия (Overlap Studies)|17
Индикаторы моментума|30
Индикаторы объёма|3
Индикаторы волатильности|3
Преобразование цены|4
Циклические индикаторы|5
Математические операторы|11
Математические преобразования|15
Статистические функции|9

Ноутбук [common_alpha_factors](02_common_alpha_factors.ipynb) содержит соответствующие примеры кода.

## Пример кода: поиск формульных альфа от WorldQuant

Мы представили [WorldQuant](https://www.worldquant.com/home/) в Главе 1, [Машинное обучение для трейдинга: от идеи к исполнению](../01_machine_learning_for_trading), как часть тренда краудсорсинга инвестиционных стратегий.
WorldQuant поддерживает виртуальный исследовательский центр, где кванты со всего мира соревнуются в поиске альфа-факторов.
Эти альфа-факторы представляют собой торговые сигналы в форме вычислительных выражений, которые помогают предсказывать движения цен, подобно распространённым факторам, описанным в предыдущем разделе.

Эти формульные альфа-факторы переводят механизм извлечения сигнала из данных в код и могут разрабатываться и тестироваться индивидуально с целью интеграции их информации в более широкую автоматизированную стратегию ([Tulchinsky 2019](https://onlinelibrary.wiley.com/doi/abs/10.1002/9781119571278.ch1)).
Как неоднократно говорилось на протяжении всей книги, поиск сигналов в больших наборах данных подвержен ошибке множественного тестирования и ложным открытиям.
Несмотря на эти важные оговорки, данный подход представляет современную альтернативу более традиционным признакам, представленным в предыдущем разделе.

[Kakushadze (2016) представляет [101 пример](https://arxiv.org/pdf/1601.00991.pdf) таких альфа-факторов, 80 процентов которых использовались в реальной торговой системе на тот момент. В статье определяется набор функций, работающих с кросс-секционными или временными рядами данных, которые можно комбинировать, например, во вложенной форме.

Ноутбук [101_formulaic_alphas](03_101_formulaic_alphas.ipynb) содержит соответствующий код.

## Пример кода: двумерная и многомерная оценка факторов

Для оценки многочисленных факторов мы полагаемся на различные метрики производительности, представленные в этой книге, включая следующие:
- Двумерные (бивариантные) метрики информационного содержания фактора относительно однодневной форвардной доходности
- Многомерные (мультивариантные) метрики важности признаков для модели градиентного бустинга, обученной предсказывать однодневную форвардную доходность с использованием всех факторов
- Финансовая производительность портфелей, инвестированных в соответствии с квантилями факторов, с использованием Alphalens

Ноутбуки [factor_evaluation](04_factor_evaluation.ipynb) и [alphalens_analysis](05_alphalens_analysis.ipynb) содержат соответствующие примеры кода.

---

## Rust-реализация для криптовалют (Bybit)

В дополнение к Python-примерам, в этой главе также представлена модульная реализация на Rust для работы с криптовалютными данными биржи Bybit:

- `rust/` — корневая директория Rust-проекта
  - `src/api/` — клиент API Bybit для получения рыночных данных
  - `src/factors/` — реализации альфа-факторов
  - `src/data/` — структуры данных и утилиты
  - `examples/` — рабочие примеры использования

См. [rust/README.md](rust/README.md) для подробной документации.
