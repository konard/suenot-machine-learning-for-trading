# –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö - –ü—Ä–æ—Å—Ç–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ

## –û—Ç–∫—É–¥–∞ –±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏?

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å —Å–æ–∑–¥–∞—Ç—å —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ä–æ–±–æ—Ç–∞, –Ω–æ —É —Ç–µ–±—è –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –∫–∞–∫ —Ö–æ—Ç–µ—Ç—å –Ω–∞—É—á–∏—Ç—å—Å—è –≤–æ–¥–∏—Ç—å –º–∞—à–∏–Ω—É, –Ω–æ –Ω–µ –∏–º–µ—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è. –î–∞–Ω–Ω—ã–µ - —ç—Ç–æ —Ç–æ–ø–ª–∏–≤–æ –¥–ª—è –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏!

### –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∞–ª–æ–≥–∏—è

**–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö = –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –º–∞–≥–∞–∑–∏–Ω**

- –û–¥–Ω–∏ –ø—Ä–∏–≤–æ–∑—è—Ç –æ–≤–æ—â–∏ (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- –î—Ä—É–≥–∏–µ –ø—Ä–∏–≤–æ–∑—è—Ç –¥–µ–ª–∏–∫–∞—Ç–µ—Å—ã (–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–µ–º–∏—É–º –¥–∞–Ω–Ω—ã–µ)
- –ï—Å—Ç—å —Ç–µ, –∫—Ç–æ –ø—Ä–∏–≤–æ–∑–∏—Ç –≤—Å–µ —Å—Ä–∞–∑—É (–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä—ã)

## 1. pandas datareader - –®–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π –Ω–æ–∂ –¥–∞–Ω–Ω—ã—Ö

**–ß—Ç–æ —ç—Ç–æ:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –º–Ω–æ–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

### –ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

**–ê–Ω–∞–ª–æ–≥–∏—è:** –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—É–ª—å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏–º–µ—Ç—å 10 —Ä–∞–∑–Ω—ã—Ö –ø—É–ª—å—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (—Ç–µ–ª–µ–≤–∏–∑–æ—Ä, –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä, –º—É–∑—ã–∫–∞), —É —Ç–µ–±—è –µ—Å—Ç—å –û–î–ò–ù —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—É–ª—å—Ç. –¢–∞–∫ –∂–µ –∏ `pandas-datareader` - –æ–¥–∏–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ pandas-datareader

**1. Yahoo! Finance** - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –∞–∫—Ü–∏—è–º
```python
import pandas_datareader as pdr
import datetime

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ü–µ–Ω—ã Apple –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥
start = datetime.datetime(2023, 1, 1)
end = datetime.datetime(2024, 1, 1)

apple = pdr.get_data_yahoo('AAPL', start, end)
print(apple.head())

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
#             Open   High    Low  Close    Volume  Adj Close
# 2023-01-03  130.0  131.0  128.5  130.5  112000000   130.5
```

**2. FRED (Federal Reserve Economic Data)** - –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –°–®–ê
```python
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –±–µ–∑—Ä–∞–±–æ—Ç–∏—Ü–µ –≤ –°–®–ê
unemployment = pdr.get_data_fred('UNRATE', start, end)
print(unemployment.tail())

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
#              UNRATE
# 2023-12-01     3.7    <- –£—Ä–æ–≤–µ–Ω—å –±–µ–∑—Ä–∞–±–æ—Ç–∏—Ü—ã 3.7%
```

**3. World Bank** - –ú–∏—Ä–æ–≤—ã–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
```python
# –í–í–ü —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω
gdp = pdr.get_data_worldbank('NY.GDP.MKTP.CD',
                              country=['US', 'CN', 'RU'])
# US = –°–®–ê, CN = –ö–∏—Ç–∞–π, RU = –†–æ—Å—Å–∏—è
```

**4. read_html** - –°–∫—Ä–∞–ø–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü —Å –≤–µ–±-—Å–∞–π—Ç–æ–≤
```python
import pandas as pd

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏–∑ Wikipedia
url = 'https://en.wikipedia.org/wiki/List_of_S%26P_500_companies'
tables = pd.read_html(url)

# –ü–µ—Ä–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ - —Å–ø–∏—Å–æ–∫ –∫–æ–º–ø–∞–Ω–∏–π S&P 500
sp500 = tables[0]
print(f"–ö–æ–º–ø–∞–Ω–∏–π –≤ S&P 500: {len(sp500)}")
print(sp500[['Symbol', 'Security', 'GICS Sector']].head())

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
#   Symbol        Security                    GICS Sector
# 0   MMM          3M                          Industrials
# 1   AOS          A. O. Smith                 Industrials
# 2   ABT          Abbott Laboratories         Health Care
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –°–∫–∞—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ—Ä—Ç—Ñ–µ–ª—è

```python
import pandas_datareader as pdr
import datetime

# –ú–æ–π –ø–æ—Ä—Ç—Ñ–µ–ª—å –∞–∫—Ü–∏–π
portfolio = ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'TSLA']

# –ü–µ—Ä–∏–æ–¥
start = datetime.datetime(2023, 1, 1)
end = datetime.datetime(2024, 1, 1)

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ü–∏–π
data = {}
for ticker in portfolio:
    print(f"–ó–∞–≥—Ä—É–∂–∞—é {ticker}...")
    data[ticker] = pdr.get_data_yahoo(ticker, start, end)

# –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ü–µ–Ω –∑–∞–∫—Ä—ã—Ç–∏—è
prices = pd.DataFrame({ticker: data[ticker]['Adj Close']
                       for ticker in portfolio})

print(prices.head())

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
#               AAPL    MSFT    GOOGL    AMZN    TSLA
# 2023-01-03   130.5   240.2    88.5    84.0   108.1
# 2023-01-04   128.8   238.5    89.2    85.5   113.6
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ pandas-datareader

‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚úÖ –ú–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
‚úÖ –•–æ—Ä–æ—à–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å pandas

‚ùå –ù–µ –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–∞–¥–µ–∂–Ω—ã (–º–æ–≥—É—Ç –æ—Ç–∫–ª—é—á–∞—Ç—å API)
‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏
‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

## 2. yfinance - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Yahoo! Finance

**–ß—Ç–æ —ç—Ç–æ:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Yahoo! Finance, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ Yahoo –∑–∞–∫—Ä—ã–ª –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API.

### –ü–æ—á–µ–º—É yfinance –ª—É—á—à–µ pandas-datareader –¥–ª—è Yahoo?

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å —Ç–µ–ª–µ—Ñ–æ–Ω–∞

- `pandas-datareader` = iPhone 6 (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
- `yfinance` = iPhone 15 (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π, –±–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–π)

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ yfinance

**1. –ë–∞–∑–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**

```python
import yfinance as yf

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Apple
apple = yf.download('AAPL', start='2023-01-01', end='2024-01-01')
print(apple.head())
```

**2. –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏**

```python
# –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç —Ç–∏–∫–µ—Ä–∞
ticker = yf.Ticker('AAPL')

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏
print(ticker.info['longBusinessSummary'])
# "Apple Inc. designs, manufactures, and markets smartphones..."

# –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
print(f"P/E —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ: {ticker.info['trailingPE']}")
print(f"–†—ã–Ω–æ—á–Ω–∞—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è: ${ticker.info['marketCap']:,}")
print(f"–î–∏–≤–∏–¥–µ–Ω–¥–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å: {ticker.info['dividendYield']:.2%}")
```

**3. –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å**

```python
# –ë–∞–ª–∞–Ω—Å
balance_sheet = ticker.balance_sheet
print(balance_sheet.head())

# –û—Ç—á–µ—Ç –æ –ø—Ä–∏–±—ã–ª—è—Ö –∏ —É–±—ã—Ç–∫–∞—Ö
income_stmt = ticker.income_stmt
print(income_stmt.head())

# –î–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏
cash_flow = ticker.cashflow
print(cash_flow.head())
```

**4. –î–∏–≤–∏–¥–µ–Ω–¥—ã –∏ —Å–ø–ª–∏—Ç—ã**

```python
# –ò—Å—Ç–æ—Ä–∏—è –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤
dividends = ticker.dividends
print(dividends.tail())

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# 2023-11-10    0.24
# 2024-02-09    0.24
# Dtype: float64

# –ò—Å—Ç–æ—Ä–∏—è —Å–ø–ª–∏—Ç–æ–≤ –∞–∫—Ü–∏–π
splits = ticker.splits
print(splits)

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# 2020-08-31    4.0    <- –°–ø–ª–∏—Ç 4:1 (–æ–¥–Ω–∞ –∞–∫—Ü–∏—è —Å—Ç–∞–ª–∞ 4)
```

**5. –û–ø—Ü–∏–æ–Ω—ã**

```python
# –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—Ç—ã —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏ –æ–ø—Ü–∏–æ–Ω–æ–≤
print(ticker.options)
# ('2024-01-19', '2024-02-16', '2024-03-15', ...)

# –¶–µ–ø–æ—á–∫–∞ –æ–ø—Ü–∏–æ–Ω–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∞—Ç—ã
opt = ticker.option_chain('2024-01-19')

# Call –æ–ø—Ü–∏–æ–Ω—ã (–Ω–∞ —Ä–æ—Å—Ç)
print(opt.calls.head())

# Put –æ–ø—Ü–∏–æ–Ω—ã (–Ω–∞ –ø–∞–¥–µ–Ω–∏–µ)
print(opt.puts.head())
```

**6. –í–Ω—É—Ç—Ä–∏–¥–Ω–µ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**

```python
# –ú–∏–Ω—É—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
minute_data = yf.download('AAPL', period='7d', interval='1m')
print(minute_data.tail())

# –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:
# 1m, 2m, 5m, 15m, 30m, 60m, 90m, 1h, 1d, 5d, 1wk, 1mo, 3mo
```

**7. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ä—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**

```python
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ü–∏–π —Å—Ä–∞–∑—É
tickers = ['AAPL', 'MSFT', 'GOOGL']
data = yf.download(tickers, start='2023-01-01', end='2024-01-01')

# –¶–µ–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ü–∏–π
close_prices = data['Close']
print(close_prices.head())

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
#               AAPL    MSFT    GOOGL
# 2023-01-03   130.5   240.2    88.5
```

### –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä: –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è

```python
import yfinance as yf
import pandas as pd

# –ü–æ—Ä—Ç—Ñ–µ–ª—å
portfolio = {
    'AAPL': 10,    # 10 –∞–∫—Ü–∏–π Apple
    'MSFT': 5,     # 5 –∞–∫—Ü–∏–π Microsoft
    'GOOGL': 8,    # 8 –∞–∫—Ü–∏–π Google
    'AMZN': 3      # 3 –∞–∫—Ü–∏–∏ Amazon
}

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã
total_value = 0
print("–ú–û–ô –ü–û–†–¢–§–ï–õ–¨:")
print("-" * 50)

for ticker, shares in portfolio.items():
    stock = yf.Ticker(ticker)
    current_price = stock.info['currentPrice']
    position_value = current_price * shares
    total_value += position_value

    print(f"{ticker:5s}: {shares:3d} –∞–∫—Ü–∏–π √ó ${current_price:7.2f} = ${position_value:10.2f}")

print("-" * 50)
print(f"–ò–¢–û–ì–û: ${total_value:,.2f}")

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# –ú–û–ô –ü–û–†–¢–§–ï–õ–¨:
# --------------------------------------------------
# AAPL :  10 –∞–∫—Ü–∏–π √ó $ 185.50 = $  1,855.00
# MSFT :   5 –∞–∫—Ü–∏–π √ó $ 378.25 = $  1,891.25
# GOOGL:   8 –∞–∫—Ü–∏–π √ó $ 141.80 = $  1,134.40
# AMZN :   3 –∞–∫—Ü–∏–∏ √ó $ 151.94 = $    455.82
# --------------------------------------------------
# –ò–¢–û–ì–û: $5,336.47
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ yfinance

‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ
‚úÖ –û–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö
‚úÖ –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
‚úÖ –û–ø—Ü–∏–æ–Ω—ã, –¥–∏–≤–∏–¥–µ–Ω–¥—ã, —Å–ø–ª–∏—Ç—ã
‚úÖ –í–Ω—É—Ç—Ä–∏–¥–Ω–µ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á

‚ùå –ó–∞–≤–∏—Å–∏—Ç –æ—Ç Yahoo! Finance (–º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Å–∞–π—Ç)
‚ùå –ò–Ω–æ–≥–¥–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ
‚ùå –ù–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API (–º–æ–∂–µ—Ç –ø–µ—Ä–µ—Å—Ç–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å)

## 3. LOBSTER - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏ –æ—Ä–¥–µ—Ä–æ–≤

**–ß—Ç–æ —ç—Ç–æ:** –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫–Ω–∏–≥–∏ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ –¥–ª—è NASDAQ –∞–∫—Ü–∏–π.

### –ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

**–ê–Ω–∞–ª–æ–≥–∏—è:** –í–∏–¥–µ–æ–ø–æ–≤—Ç–æ—Ä —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–≥–æ –º–∞—Ç—á–∞

–ü—Ä–µ–¥—Å—Ç–∞–≤—å —Ñ—É—Ç–±–æ–ª—å–Ω—ã–π –º–∞—Ç—á:
- **–û–±—ã—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ü–µ–Ω—ã):** "–°—á–µ—Ç 2:1, –∫–æ–Ω–µ—Ü –∏–≥—Ä—ã"
- **LOBSTER –¥–∞–Ω–Ω—ã–µ:** –ó–∞–ø–∏—Å—å –ö–ê–ñ–î–û–ì–û –ø–∞—Å–∞, —É–¥–∞—Ä–∞, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤

LOBSTER –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ –≤ –∫–Ω–∏–≥–µ –æ—Ä–¥–µ—Ä–æ–≤:
- –ö—Ç–æ-—Ç–æ –≤—ã—Å—Ç–∞–≤–∏–ª –æ—Ä–¥–µ—Ä –Ω–∞ –ø–æ–∫—É–ø–∫—É
- –ö—Ç–æ-—Ç–æ –æ—Ç–º–µ–Ω–∏–ª –æ—Ä–¥–µ—Ä
- –ü—Ä–æ–∏–∑–æ—à–ª–∞ —Å–¥–µ–ª–∫–∞
- –ò–∑–º–µ–Ω–∏–ª–∞—Å—å —Ü–µ–Ω–∞

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö LOBSTER

**1. Message File** - –°–æ–±—ã—Ç–∏—è
```
–í—Ä–µ–º—è         –¢–∏–ø  ID –æ—Ä–¥–µ—Ä–∞  –†–∞–∑–º–µ—Ä  –¶–µ–Ω–∞
34234523423   1    1000001     100     139.50   <- –ù–æ–≤—ã–π –æ—Ä–¥–µ—Ä
34234567890   2    1000001     0       0        <- –û—Ä–¥–µ—Ä –æ—Ç–º–µ–Ω–µ–Ω
34234598765   3    1000002     50      139.51   <- –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
```

**2. Orderbook File** - –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–∏–≥–∏ –æ—Ä–¥–µ—Ä–æ–≤
```
–í—Ä–µ–º—è         Ask P1  Ask V1  Bid P1  Bid V1  Ask P2  Ask V2  Bid P2  Bid V2
34234523423   139.52  300     139.50  500     139.53  200     139.49  400
34234567890   139.52  300     139.50  400     139.53  200     139.49  400
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
import pandas as pd

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
messages = pd.read_csv('AAPL_2023-01-03_34200000_57600000_message_10.csv',
                       header=None,
                       names=['Time', 'EventType', 'OrderID', 'Size', 'Price', 'Direction'])

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–∏–≥–∏ –æ—Ä–¥–µ—Ä–æ–≤
orderbook = pd.read_csv('AAPL_2023-01-03_34200000_57600000_orderbook_10.csv',
                        header=None)

# –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:
# 1 = –ù–æ–≤—ã–π –ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä
# 2 = –û—Ç–º–µ–Ω–∞ –æ—Ä–¥–µ—Ä–∞
# 3 = –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
# 4 = –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ–π —á–∞—Å—Ç–∏ –æ—Ä–¥–µ—Ä–∞
# 5 = –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ–π —á–∞—Å—Ç–∏ –æ—Ä–¥–µ—Ä–∞

# –ê–Ω–∞–ª–∏–∑: —Å–∫–æ–ª—å–∫–æ –æ—Ä–¥–µ—Ä–æ–≤ –±—ã–ª–æ –æ—Ç–º–µ–Ω–µ–Ω–æ?
cancellations = messages[messages['EventType'] == 2]
print(f"–û—Ç–º–µ–Ω–µ–Ω–æ –æ—Ä–¥–µ—Ä–æ–≤: {len(cancellations)}")

# –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –æ—Ç–º–µ–Ω–µ–Ω–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞
avg_cancel_size = cancellations['Size'].mean()
print(f"–°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä: {avg_cancel_size:.0f} –∞–∫—Ü–∏–π")
```

### –ö–æ–º—É –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ LOBSTER?

**–í—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–µ —Ç—Ä–µ–π–¥–µ—Ä—ã (HFT)**
- –í–∏–¥—è—Ç –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–Ω–∏–≥–µ –æ—Ä–¥–µ—Ä–æ–≤
- –ú–æ–≥—É—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã

**–ú–∞—Ä–∫–µ—Ç–º–µ–π–∫–µ—Ä—ã**
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç –≥–ª—É–±–∏–Ω—É —Ä—ã–Ω–∫–∞
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –æ—Ä–¥–µ—Ä–æ–≤

**–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–∏**
- –ò–∑—É—á–∞—é—Ç –º–∏–∫—Ä–æ—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä—ã–Ω–∫–∞
- –¢–µ—Å—Ç–∏—Ä—É—é—Ç –º–æ–¥–µ–ª–∏ –ø–æ—Ç–æ–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ LOBSTER

‚úÖ –î–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è –∫–Ω–∏–≥–∏ –æ—Ä–¥–µ—Ä–æ–≤
‚úÖ –¢–æ—á–Ω–æ—Å—Ç—å –¥–æ –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥—ã
‚úÖ –ü–æ–ª–Ω–∞—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
‚úÖ –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –¥–æ—Å—Ç—É–ø (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π)

‚ùå –û—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ –¥–ª—è –∫–æ–º–º–µ—Ä—Ü–∏–∏ ($500-2000/–º–µ—Å—è—Ü)
‚ùå –û–≥—Ä–æ–º–Ω—ã–π –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö
‚ùå –°–ª–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å
‚ùå –¢–æ–ª—å–∫–æ NASDAQ

## 4. Quandl - –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö

**–ß—Ç–æ —ç—Ç–æ:** –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –¥–∞–Ω–Ω—ã–µ –æ—Ç —Å–æ—Ç–µ–Ω –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤.

### –ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

**–ê–Ω–∞–ª–æ–≥–∏—è:** Netflix –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ö–∞–∫ Netflix –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ñ–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã –æ—Ç —Ä–∞–∑–Ω—ã—Ö —Å—Ç—É–¥–∏–π, —Ç–∞–∫ Quandl —Å–æ–±–∏—Ä–∞–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ Quandl

**1. –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
```python
import quandl

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å API –∫–ª—é—á (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
quandl.ApiConfig.api_key = 'YOUR_API_KEY'

# –¶–µ–Ω—ã –Ω–∞ –Ω–µ—Ñ—Ç—å
oil = quandl.get('OPEC/ORB')  # OPEC Reference Basket
print(oil.tail())

# –¶–µ–Ω—ã –Ω–∞ –∑–æ–ª–æ—Ç–æ
gold = quandl.get('LBMA/GOLD')  # London Bullion Market
print(gold.tail())

# –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç
eur_usd = quandl.get('ECB/EURUSD')  # EUR/USD –æ—Ç –ï–¶–ë
print(eur_usd.tail())
```

**2. –ü—Ä–µ–º–∏—É–º –¥–∞–Ω–Ω—ã–µ** (–ø–ª–∞—Ç–Ω—ã–µ)

```python
# –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Sharadar
# (—Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π)
fundamentals = quandl.get_table('SHARADAR/SF1',
                                ticker='AAPL',
                                dimension='MRQ',  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                                qopts={'columns': ['ticker', 'revenue', 'netinc']})

print(fundamentals)

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
#   ticker      revenue       netinc
# 0   AAPL   117154000000   29998000000
```

**3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**

```python
# –î–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–≥–Ω–æ–∑–∞—Ö –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤
estimates = quandl.get_table('ZACKS/FC',
                             ticker='AAPL',
                             per_type='A')  # –ì–æ–¥–æ–≤—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã

# –ò–Ω—Å–∞–π–¥–µ—Ä—Å–∫–∏–µ —Å–¥–µ–ª–∫–∏
insider = quandl.get_table('INSIDERS/TRANSACTIONS',
                           ticker='AAPL')
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∑–æ–ª–æ—Ç–∞ –∏ –∞–∫—Ü–∏–π

```python
import quandl
import pandas as pd
import matplotlib.pyplot as plt

quandl.ApiConfig.api_key = 'YOUR_API_KEY'

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
gold = quandl.get('LBMA/GOLD', start_date='2020-01-01')['USD (AM)']
sp500 = quandl.get('YALE/SPCOMP', start_date='2020-01-01')['S&P Composite']

# –û–±—ä–µ–¥–∏–Ω–∏—Ç—å
data = pd.DataFrame({'Gold': gold, 'S&P500': sp500})
data = data.dropna()

# –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å (–Ω–∞—á–∞—Ç—å —Å–æ 100)
normalized = data / data.iloc[0] * 100

# –ì—Ä–∞—Ñ–∏–∫
normalized.plot(figsize=(12, 6))
plt.title('–ó–æ–ª–æ—Ç–æ vs S&P 500 (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–æ)')
plt.ylabel('–ò–Ω–¥–µ–∫—Å (–Ω–∞—á–∞–ª–æ = 100)')
plt.xlabel('–î–∞—Ç–∞')
plt.legend()
plt.grid()
plt.show()

# –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è
correlation = data['Gold'].corr(data['S&P500'])
print(f"–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∑–æ–ª–æ—Ç–∞ –∏ S&P 500: {correlation:.2f}")
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Quandl

‚úÖ –û–≥—Ä–æ–º–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (600+ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
‚úÖ –ï–¥–∏–Ω—ã–π API –¥–ª—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
‚úÖ –ï—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚úÖ –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚úÖ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

‚ùå –õ—É—á—à–∏–µ –¥–∞–Ω–Ω—ã–µ - –ø–ª–∞—Ç–Ω—ã–µ (–¥–æ—Ä–æ–≥–æ)
‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º —Ç–∞—Ä–∏—Ñ–µ
‚ùå –ù–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞–¥–µ–∂–Ω—ã

## 5. Zipline - –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥ —Å –¥–∞–Ω–Ω—ã–º–∏

**–ß—Ç–æ —ç—Ç–æ:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ.

### –ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

**–ê–Ω–∞–ª–æ–≥–∏—è:** –°–∏–º—É–ª—è—Ç–æ—Ä –≤–æ–∂–¥–µ–Ω–∏—è

–ö–∞–∫ —Å–∏–º—É–ª—è—Ç–æ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—É—á–∏—Ç—å—Å—è –≤–æ–¥–∏—Ç—å, –Ω–µ —Ä–∏—Å–∫—É—è —Ä–∞–∑–±–∏—Ç—å –Ω–∞—Å—Ç–æ—è—â—É—é –º–∞—à–∏–Ω—É, —Ç–∞–∫ Zipline –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—Ä–≥–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–µ —Ä–∏—Å–∫—É—è —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–µ–Ω—å–≥–∞–º–∏.

### –ö–∞–∫ Zipline —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏

**1. –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –±–∞–Ω–¥–ª –¥–∞–Ω–Ω—ã—Ö Quandl**

```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑)
# zipline ingest -b quandl

# –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ 3000+ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–º –∞–∫—Ü–∏—è–º
```

**2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏**

```python
from zipline import run_algorithm
from zipline.api import order_target_percent, symbol
import pandas as pd

def initialize(context):
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏"""
    context.asset = symbol('AAPL')

def handle_data(context, data):
    """–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è"""

    # –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
    price = data.current(context.asset, 'price')

    # –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 –¥–Ω–µ–π)
    history = data.history(context.asset, 'price', 20, '1d')

    # –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: –∫—É–ø–∏—Ç—å –µ—Å–ª–∏ —Ü–µ–Ω–∞ –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–π
    moving_average = history.mean()

    if price > moving_average:
        # –ö—É–ø–∏—Ç—å (–≤–ª–æ–∂–∏—Ç—å 100% –∫–∞–ø–∏—Ç–∞–ª–∞)
        order_target_percent(context.asset, 1.0)
    else:
        # –ü—Ä–æ–¥–∞—Ç—å –≤—Å–µ
        order_target_percent(context.asset, 0.0)

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫—Ç–µ—Å—Ç
result = run_algorithm(
    start=pd.Timestamp('2020-01-01'),
    end=pd.Timestamp('2024-01-01'),
    initialize=initialize,
    handle_data=handle_data,
    capital_base=10000,  # –ù–∞—á–∞–ª—å–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª $10,000
    data_frequency='daily',
    bundle='quandl'
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
print(f"–§–∏–Ω–∞–ª—å–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª: ${result.portfolio_value[-1]:,.2f}")
print(f"–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å: {(result.portfolio_value[-1]/10000 - 1)*100:.2f}%")
```

**3. –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Zipline**

```python
def handle_data(context, data):
    asset = symbol('AAPL')

    # –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ
    current_price = data.current(asset, 'price')
    current_volume = data.current(asset, 'volume')

    # –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
    history = data.history(
        asset,
        fields=['open', 'high', 'low', 'close', 'volume'],
        bar_count=30,  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 –±–∞—Ä–æ–≤
        frequency='1d'  # –î–Ω–µ–≤–Ω—ã–µ –±–∞—Ä—ã
    )

    # OHLC –¥–∞–Ω–Ω—ã–µ
    opens = history['open']
    highs = history['high']
    lows = history['low']
    closes = history['close']
    volumes = history['volume']

    # –ú–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
    sma_20 = closes.mean()  # –ü—Ä–æ—Å—Ç–∞—è —Å–∫–æ–ª—å–∑—è—â–∞—è —Å—Ä–µ–¥–Ω—è—è
    volatility = closes.std()  # –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Zipline

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥
‚úÖ –£—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π –∏ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TA-Lib –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Quandl

‚ùå –°–ª–æ–∂–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
‚ùå –î–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –¥–æ 2018 –≥–æ–¥–∞ (Quandl –±–∞–Ω–¥–ª)
‚ùå –¢—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
‚ùå Quantopian –∑–∞–∫—Ä—ã–ª—Å—è (–±—ã–ª–∞ –æ–±–ª–∞—á–Ω–∞—è –≤–µ—Ä—Å–∏—è)

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤

| –ü–æ—Å—Ç–∞–≤—â–∏–∫ | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ? | –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö | –õ–µ–≥–∫–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | –î–ª—è –∫–æ–≥–æ? |
|-----------|------------|-------------|------------------------|-----------|
| **pandas-datareader** | ‚úÖ –î–∞ | –¶–µ–Ω—ã, —ç–∫–æ–Ω–æ–º–∏–∫–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ | –ù–∞—á–∏–Ω–∞—é—â–∏–µ |
| **yfinance** | ‚úÖ –î–∞ | –¶–µ–Ω—ã, —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª, –æ–ø—Ü–∏–æ–Ω—ã | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ | –í—Å–µ |
| **LOBSTER** | ‚ùå –ù–µ—Ç ($) | –ö–Ω–∏–≥–∞ –æ—Ä–¥–µ—Ä–æ–≤ | ‚≠ê‚≠ê –°–ª–æ–∂–Ω–æ | HFT, –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–∏ |
| **Quandl** | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –í—Å–µ —Ç–∏–ø—ã | ‚≠ê‚≠ê‚≠ê‚≠ê –ü—Ä–æ—Å—Ç–æ | –í—Å–µ |
| **Zipline** | ‚úÖ –î–∞ | –¶–µ–Ω—ã (–¥–æ 2018) | ‚≠ê‚≠ê‚≠ê –°—Ä–µ–¥–Ω–µ | –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥ |

## –ö–∞–∫–æ–π –ø–æ—Å—Ç–∞–≤—â–∏–∫ –≤—ã–±—Ä–∞—Ç—å?

### –ï—Å–ª–∏ —Ç—ã –Ω–∞—á–∏–Ω–∞—é—â–∏–π:
üëâ **yfinance** - –ø—Ä–æ—â–µ –Ω–µ–∫—É–¥–∞, –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö

```python
import yfinance as yf
data = yf.download('AAPL', start='2020-01-01')
# –ì–æ—Ç–æ–≤–æ!
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω—ã —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:
üëâ **pandas-datareader** + FRED

```python
import pandas_datareader as pdr
unemployment = pdr.get_data_fred('UNRATE')
```

### –ï—Å–ª–∏ –¥–µ–ª–∞–µ—à—å –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥:
üëâ **Zipline**

```python
# –£–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏ –¥–≤–∏–∂–æ–∫ –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω—ã —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
üëâ **Quandl** (Sharadar) –∏–ª–∏ **yfinance**

```python
# yfinance - –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ
ticker = yf.Ticker('AAPL')
fundamentals = ticker.info

# Quandl - –ø–ª–∞—Ç–Ω–æ, –Ω–æ –ø–æ–ª–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
```

### –ï—Å–ª–∏ –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è HFT:
üëâ **LOBSTER** (–¥–æ—Ä–æ–≥–æ, –Ω–æ —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç: –°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

–î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∞–∫—Ü–∏–π:

```python
import yfinance as yf
import pandas as pd
import sqlite3
from datetime import datetime

# –°–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö –∞–∫—Ü–∏–π
tickers = ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'TSLA',
           'META', 'NVDA', 'JPM', 'V', 'WMT']

# –°–æ–∑–¥–∞—Ç—å SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
conn = sqlite3.connect('stock_data.db')

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
for ticker in tickers:
    print(f"–ó–∞–≥—Ä—É–∂–∞—é {ticker}...")

    # –°–∫–∞—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
    data = yf.download(ticker, start='2020-01-01', progress=False)

    # –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É —Å —Ç–∏–∫–µ—Ä–æ–º
    data['Ticker'] = ticker

    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    data.to_sql('prices', conn, if_exists='append', index=True)

print("–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞!")

# –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã
query = """
SELECT Ticker, Date, Close
FROM prices
WHERE Date = (SELECT MAX(Date) FROM prices)
ORDER BY Close DESC
"""

latest_prices = pd.read_sql(query, conn)
print("\n–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ü–µ–Ω—ã:")
print(latest_prices)

conn.close()
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –ù–∞—á–Ω–∏ —Å –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (yfinance), –∞ –ø–æ—Ç–æ–º –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ –ø–ª–∞—Ç–Ω—ã–º, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ.

**–ü—É—Ç—å —Ä–∞–∑–≤–∏—Ç–∏—è:**
1. **–ù–æ–≤–∏—á–æ–∫:** yfinance –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è
2. **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π:** Quandl –¥–ª—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª–∞ + yfinance –¥–ª—è —Ü–µ–Ω
3. **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª:** LOBSTER –¥–ª—è HFT + –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ API

–î–∞–Ω–Ω—ã–µ - —ç—Ç–æ 50% —É—Å–ø–µ—Ö–∞ –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ. –í—Ç–æ—Ä–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö!

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û—Ç–∫—Ä–æ–π –Ω–æ—É—Ç–±—É–∫–∏ –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–∞–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤!
